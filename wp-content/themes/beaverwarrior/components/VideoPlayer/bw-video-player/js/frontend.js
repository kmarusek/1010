"use strict";jQuery(function(a){BWVideoPlayer=function(a){this.element=a.element,this.settings=a,this.init()},BWVideoPlayer.prototype={nodeID:"",element:"",settings:{},init:function(){var a=this;this.nodeID="video-node-"+a.settings.id,"inline"===a.settings.videoPlayerType&&(this.plyrObject=new Plyr(this.element.find(".video-container video"))),this.element.find(".video-play-button").click(function(){switch(a.settings.videoPlayerType){case"modal":a._playVideoModal();break;case"inline":a._playVideoInline()}})},_playVideoInline:function(){switch(this.element.find(".video-inline-container").addClass("video-active"),this.settings.videoSource){case"youtube":this._playVideoInlineYouTube();break;default:this._playVideoInlineUpload()}},_playVideoInlineUpload:function(){var b=this;this.plyrObject.on("ended",a.proxy(this._resetVideoPlayerInline,this)),setTimeout(function(){b.plyrObject.play()},1e3)},_playVideoInlineYouTube:function(){this.element.find(".video-source").uniqueId();var b=this.element.find(".video-source").attr("id"),c=a("#"+b).data("youtube-embed-id");this.youTubePlayer?this.youTubePlayer.playVideo():this._initYouTubeVideo(b,c)},_initYouTubeVideo:function(a,b){this.youTubePlayer=new YT.Player(a,{videoId:b,events:{onReady:this._onYouTubePlayerReady.bind(this),onStateChange:this._onYouTubePlayerStateChange.bind(this)},playerVars:{enablejsapi:!0}})},_resetVideoPlayerInline:function(){this.element.find(".video-inline-container.video-active").removeClass("video-active"),this.settings.videoSource,this._resetVideoPlayerUpload()},_resetVideoPlayerUpload:function(){var a=this;setTimeout(function(){a.plyrObject.restart()},300)},_onYouTubePlayerReady:function(a){a.target.playVideo()},_onYouTubePlayerStateChange:function(a){0===a.data&&"inline"===this.settings.videoPlayerType&&this._resetVideoPlayerInline()},_initModalVideoYouTube:function(){a(".featherlight."+this.nodeID+" .video-source").uniqueId();var b=a(".featherlight."+this.nodeID+" .video-source").attr("id"),c=a("#"+b).data("youtube-embed-id");this._initYouTubeVideo(b,c)},_initModalVideoUpload:function(){var b=this;b.plyrObject=new Plyr(a(".featherlight."+b.nodeID+" video")),setTimeout(function(){b.plyrObject.play()},500)},_playVideoModal:function(){var b=this,c=this.element.find(".video-content").html();this.videoModalObject=a.featherlight(c,{variant:b.nodeID+" bw-video-player-modal",openSpeed:0,closeSpeed:0,beforeOpen:function(){a("body").addClass("bw-video-modal-open").addClass("bw-video-modal-open-"+b.nodeID)},afterOpen:function(){a(".featherlight."+b.nodeID).addClass("featherlight-visible")},afterClose:function(){a("body").removeClass("bw-video-modal-open").removeClass("bw-video-modal-open-"+b.nodeID)},afterContent:function(){switch(b.settings.videoSource){case"youtube":b._initModalVideoYouTube();break;default:b._initModalVideoUpload()}}})}}});